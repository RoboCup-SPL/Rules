% !TeX root = ../SPL-Rules.tex
% !TeX spellcheck = en_US
\section{The Official RoboCup Competition Rules}
\label{sec:comRules}

This section contains rules that are not directly relevant for games and that may not apply at local opens.
However, these rules will be upheld at the yearly international RoboCup competition.

\subsection{Qualification Procedure and Code Usage}
\label{sec:qualification_procedure_codeuse}

The qualification procedure as well as the corresponding deadlines will be announced by the Technical Committee before qualification applications are accepted.

The RoboCup Standard Platform League offers unique possibilities to use code from other teams.
In spirit of the RoboCup every team is generally allowed to use code from other teams to push the league further with their own research.
This use must be cited.
However, every participant of RoboCup \textbf{\textit{has a duty}} to contribute to the league.

To qualify, every team must make at least \textit{one novel contribution} within their soccer software within the last \NovelContributionTime.
Contributions outside of this period are no longer considered sufficiently novel and a team must make at least one \textit{new} contribution.
It is also \textit{mandatory} for a team to use their novel contribution in all competition games.
A novel contribution is:
\begin{itemize}
  \item Research publishable contribution to a \textit{game critical module}
  \item Complete replacement of a \textit{game critical module}, with original software.
    This may not necessarily be research publishable, but must be of equivalent scale and quality to research publishable work.
\end{itemize}

It is not a novel contribution to replace a module with code copied from another source, or to simply train a machine-learning model released by another team using new data.

As of the \RCYear competition, the following are recognized as game critical modules:
Ball detection, Robot detection, Robot vision (not otherwise listed), Localization, Walk/Kick engine, Dynamic stabilization, Behavior Architecture, \& Distribution computation, Whistle detection.

As of the \RCYear competition, the following are \textit{not} recognized as sufficiently game critical (even if the ability to play soccer depends on these):
Hand-written Soccer Behaviors, Natural Language detection, \& Robot and GC Communication.

In their qualification application, teams may petition the technical committee to recognize other novel contributions not listed here.
Additionally, a team that has participated at RoboCup for at least \NovelContributionTime consecutively may petition the technical committee to recognize contributions to non-game critical modules, such as developing infrastructure for the league.\footnote{
  However, the technical committee should balance whether a team is continuing to use their own software in games.
}
A team may also petition for the technical committee to reconsider the list of game critical and non-game critical modules.
Successful petitions will be publicly announced to the league for transparency.
%For example, a team may petition and provide evidence that their work on the whistle detection is substantial and game critical, thus satisfying the requirements of a novel contribution.

If a team that is otherwise eligible for qualification cannot provide sufficient evidence of the required contributions by the deadline for applications, then that team may be qualified for RoboCup \textit{on probation}.
In this case, the team must provide evidence of the required contributions to become \textit{fully} qualified by the registration deadline of the RoboCup event.
If no suitable evidence is provided, the team's probationary qualification will lapse.

Every applicant must also bring a poster containing the team's contribution, focused on the current year, to the RoboCup event to share their contributions with the other teams.

Failure to meet any of these requirements will result in a qualification penalty for subsequent years.

\subsection{Champions Cup and Challenge Shield}
\label{sec:cc_and_cs}

Two separate competitions are played: the Champions Cup for the strongest teams and the Challenge Shield for all other teams.
Teams are assigned to one of the competitions during the application phase, considering their preference, ability and organizational aspects.
Matches in the Champions Cup are played with up to 7 players on each team, while the Challenge Shield is played with up to 5 players on each team (\cf~\cref{sec:robot_players}).

In addition, some rules are simplified for Challenge Shield matches. The major differences are:
\begin{itemize}
  \item The requirement to recognize visual referee signals is relaxed for the Challenge Shield (\cf~\cref{sec:robot_players}).

  % uncomment this after the relevant pull request is merged and update cref
  % \item Goals may be scored via direct kick from kick-off. The indirect kick rules are relaxed for the Challenge Shield (\cf~\cref{sec:TODO}).
\end{itemize}

\subsection{Game Structure}

The clock stops during stoppages of play (such as \texttt{ready} and \texttt{set} state after goals) from the quarter-finals onward.
In round robin pool play, a game can finish in a draw as no penalty shoot-out will follow.
In the promotion round, intermediate round, quarter finals, semi finals, 3rd place or final, a game that ends in a draw will be followed by a penalty shoot-out (see \cref{sec:penalty_shoot-out}).

\subsection{Competition Mode}

Depending on the number of participating teams, the OC and TC create a competition table.
The following modes can be selected:
\begin{itemize}
  \item Group games, with or without intermediate rounds, with concluding knock-out phase
  \item Double elimination system
  \item Swiss tournament system
  \item Swiss tournament system with concluding knock-out phase.
\end{itemize}

All teams participating in the competition are initially ranked using the Glicko system\footnote{\url{http://www.glicko.net/glicko/glicko.pdf}} based on all available results from previous official RoboCup tournaments.
(New teams will be ranked equally below all previously competing teams.
Teams that participated previously but did not participate in the previous year will be ranked above new teams but below teams that competed in the previous year.)

The OC will announce two weeks before a competition:
\begin{itemize}
  \item Competition mode and which competition rules will be applied
  \item Initial ranking of participating teams
  \item How to determine the overall winner and the ranking of the technical challenges
  \item Pre-qualification rules.
\end{itemize}

\subsection{Referee Selection and Requirements}
\label{sec:refSelection}

During pool play, the games will be refereed by members of teams from a different pool.

Each team has to referee a number of games.
A schedule will be released specifying the games for which each team is required to provide two referees.
Referees should report to the appropriate field at least ten minutes before the game is scheduled to start.

If a team fails to provide two referees for a game in which they are scheduled to provide referees, it will be noted by the organizing committee and recorded as a \textbf{qualification penalty} (\cref{sec:qualificationPenalties}).

For each of the games, a team will be required either to provide the head referee and the operator of the GameController, or the two assistant referees.
The two teams assigned to referee a game shall decide among themselves which roles each team will fulfill.
Note, however, that the head referee and the GameController should always be from the same team.

A team may swap their scheduled refereeing duties with another team, but the team listed on the referee schedule will be held accountable if referees fail to appear for a game they are scheduled to referee.

The requirement to referee may be an extreme hardship for extremely small teams.
If a team believes providing two referees for games will be an extreme hardship, they must send an email explaining their situation to the Organizing Committee and Technical Committee at least two weeks before the first set up day of the competition.
The Organizing and Technical Committees will then consider the request and attempt to find an acceptable solution.

Referees must have good knowledge of the rules as applied in the tournament, and the operator of the GameController must be experienced in using that software.
Referees and the GameController should be selected among the more senior members of a team, and preferably have prior experience with games in the RoboCup Standard Platform league.

In each game, each of the teams playing shall be able to veto one and only one eligible referee with no reason required.
The veto must be delivered before the start of the \texttt{ready} phase or during a stoppage of play.

\subsection{Rules for Forfeiting}
\label{sec:forfeit}

Teams who do not make a good faith effort to participate in a scheduled game are considered to forfeit the game.

If a team notifies the technical committee that they wish to forfeit less than two hours before their scheduled game time, simply fails to show up for their game, or decides during their game that they wish to forfeit, then the opposing team will play the match against an empty field.
However, any own goals will not be scored.
Hence, after an opponent forfeits, the team playing against an empty field cannot do worse than they were doing at the time the opponent decided to forfeit.
Teams may choose to forfeit at any stoppage of play.
However, once a forfeit is announced, they may not reverse this decision.

If a team notifies the technical committee that they wish to forfeit at least two hours before their schedule game time, the following procedure will be followed.
\begin{itemize}
  \item If a team chooses to forfeit a match in the round robin games the other team plays the match against an empty field.
    However, any own goals will not be scored.
  \item If a team chooses to forfeit in a knock-out game it gets replaced by the next best qualified team, \ie the team it kicked out or left behind in the round robins.
\end{itemize}

Note that there are a few unlikely cases that are not covered by these rules.
If a situation is not covered by these rules, the technical committee and the organizing committee will work together to make a decision.

Any forfeit will result in a qualification penalty being recorded (\cf \cref{sec:qualificationPenalties}) but the circumstances of the forfeit will affect the severity of the offense and the impact on future qualification.

\subsection{Source Code Releases}
\label{sec:source_code_releases}

All teams that have participated in RoboCup must subsequently release code from that year's codebase.
The code must be licensed such that other RoboCup participants can use it, although the license may place conditions on its use.
The preferred type of release is the full source code of the software that was running in the team's last game at RoboCup.
In case this is not possible (\eg due to legal reasons), it is required that at least the source code related to the novel contributions (as given during the qualification process) is published.
Participation in technical challenges may come with additional requirements on the amount of components to be released.

The source code must be published and its availability announced on the SPL mailing list (\url{robocup-nao@lists.robocup.org}) by \DTMdate{\CodeReleaseAnnouncementDate}.
Failing to publish source code by the deadline will result in a qualification penalty being recorded (\cf~\cref{sec:qualificationPenalties}).

\subsection{Subsequent Year Pre-qualification Procedure}
\label{sec:preQual}

Teams may become pre-qualified for the subsequent year's competition by fulfilling criteria set two weeks before the competition.
Pre-qualified teams do not compete with other teams' applications during the qualification process.
However, the call for participation for the subsequent year's competition may set additional formal requirements that must be fulfilled in order to remain pre-qualified.

\subsection{Qualification Penalties}
\label{sec:qualificationPenalties}

There are a number of offenses which lead to qualification penalties being recorded against a team.
These are as follows:
\begin{itemize}
  \item Withdrawing from RoboCup after the final commitment deadline
  \item Failing to referee when assigned (\cref{sec:refSelection})
  \item Forfeiting a game (\cref{sec:forfeit})
  \item Failing to publish source code by the deadline (\cref{sec:source_code_releases})
\end{itemize}

A team cannot be pre-qualified for RoboCup in the year following a qualification penalty.
Furthermore, a qualification penalty is considered by the Technical Committee when reviewing applications and will negatively affect the assessment of a team's application.
Multiple penalties accumulate and will result in an even more negative assessment of a team's application.
Qualification penalties are considered for a period of three years following the offense.

Whenever a qualification penalty is recorded, all relevant details including any possible mitigating circumstances are also recorded and these will also inform the assessment of a team's application.

\subsection{Disqualification During Competition}
\label{sec:disqualification_during_comp}

A team may be disqualified during the RoboCup competition for:
\begin{itemize}
  \item A serious violation of the terms of a team's qualification
  \item Gaining a Qualification Penalty during the course of the competition~(\cf \cref{sec:qualificationPenalties})
  \item A serious breach of ethics, or serious behavior unbecoming of participants of RoboCup.
\end{itemize}

\textbf{Example.} A team promises to use their novel contribution in RoboCup games, but fails to do so.
Alternatively, a team deliberately misleads the technical committee about the novelty of their work and/or their contribution to the league, such that they are deemed to have copied another team.

A team can \textit{only} be disqualified by a decision of the \textit{Board of Trustees of the RoboCup Federation}.
The RoboCup Soccer SPL executive must petition the board in writing at their soonest possible availability.
The executive must simultaneously inform the relevant team of the petition in writing.

A disqualified team automatically forfeits all games~(\cf \cref{sec:forfeit}).
For practicality, the disqualification should not apply \textit{retroactively}.
However, by majority vote of the team leaders, provisions for retroactive disqualification may be made in the fairness of the affected teams.
